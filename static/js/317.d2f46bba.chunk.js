"use strict";(self.webpackChunkklub=self.webpackChunkklub||[]).push([[317],{42460:function(e,n,t){var r=t(73542),a=t(64554),s=t(20890),i=t(36151),c=t(80184);n.Z=function(e){var n=e.open,t=e.handleClose,l=e.handleSubmit,o=e.confirmMessage,u=void 0===o?"\uc815\ub9d0 \uc2e4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?":o;return(0,c.jsx)(r.Z,{open:n,onClose:t,children:(0,c.jsxs)(a.Z,{textAlign:"center",p:3,children:[(0,c.jsx)(s.Z,{variant:"h4",color:"primary",children:u}),(0,c.jsxs)(a.Z,{display:"flex",justifyContent:"space-evenly",mt:2,children:[(0,c.jsx)(i.Z,{variant:"outlined",onClick:t,children:"\ucde8\uc18c"}),(0,c.jsx)(i.Z,{variant:"contained",color:"error",onClick:l,children:"\ud655\uc778"})]})]})})}},68418:function(e,n,t){var r=t(66934),a=t(64554),s=t(89164),i=t(80184),c=(0,r.ZP)(a.Z)((function(e){var n=e.theme;return"\n        padding: ".concat(n.spacing(3),";\n")}));n.Z=function(e){var n=e.children;return(0,i.jsx)(c,{className:"MuiPageTitle-wrapper",children:(0,i.jsx)(s.Z,{maxWidth:"lg",children:n})})}},56499:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(43504),a=t(74696),s=t(64554),i=t(61889),c=t(20890),l=t(36151),o=t(16871),u=t(66934),d=t(12659),x=t(80184),h=(0,u.ZP)(i.ZP)("\n    padding: 10px;\n    text-align: center;\n");var m=function(){var e=(0,o.UO)().id,n=[{name:"\ud68c\uc6d0 \uba85\ub2e8",link:"/manage/".concat(e,"/member")},{name:"\ucd9c\uc11d \uad00\ub9ac",link:"/manage/".concat(e,"/attendance")},{name:"\ud68c\ube44 \uad00\ub9ac",link:"/manage/".concat(e,"/fee")},{name:"\ubaa8\uc9d1 \uad00\ub9ac",link:"/manage/".concat(e,"/recruit")},{name:"\ub3d9\uc544\ub9ac \uc124\uc815",link:"/manage/".concat(e,"/settings")}];return(0,x.jsx)(s.Z,{mt:3,children:(0,x.jsx)(i.ZP,{container:!0,justifyContent:"space-between",children:n.map((function(e,n){return(0,x.jsx)(h,{item:!0,xs:6,sm:4,md:2,sx:window.location.pathname.startsWith(e.link)?{backgroundColor:d.r.colors.secondary.main,borderRadius:"10px"}:{},children:(0,x.jsx)(r.rU,{to:e.link,style:{textDecoration:"none",color:"black"},children:(0,x.jsx)(c.Z,{variant:"h4",sx:window.location.pathname.startsWith(e.link)?{color:"white"}:{},children:e.name})})},n)}))})})};var Z=function(e){var n=e.clubName,t=e.buttonText,o=e.secondButtonText,u=e.link,d=e.secondLink;return(0,x.jsxs)(s.Z,{paddingLeft:0,pr:0,children:[(0,x.jsxs)(i.ZP,{container:!0,alignItems:"center",children:[(0,x.jsxs)(i.ZP,{item:!0,xs:12,sm:4,md:4,children:[(0,x.jsx)(c.Z,{variant:"h3",component:"h3",gutterBottom:!0,children:n}),(0,x.jsxs)(c.Z,{variant:"subtitle2",children:[n,"\uc758 \ud68c\uc6d0 \uba85\ub2e8, \ubaa8\uc9d1\u2022\ud64d\ubcf4, \ud65c\ub3d9 \ub0b4\uc5ed\uc744 \uad00\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"]})]}),(0,x.jsx)(i.ZP,{item:!0,xs:0,sm:0,md:4}),o?(0,x.jsx)(i.ZP,{item:!0,xs:12,sm:4,md:2,textAlign:"right",children:(0,x.jsx)(r.rU,{to:null!==d&&void 0!==d?d:"#",style:{textDecoration:"none"},children:(0,x.jsx)(l.Z,{sx:{mt:{xs:2,md:0},width:{xs:"100%",sm:"inherit"}},variant:"contained",color:"success",children:o})})}):(0,x.jsx)(i.ZP,{item:!0,xs:0,sm:4,md:2}),t&&(0,x.jsx)(i.ZP,{item:!0,xs:12,sm:4,md:2,textAlign:"center",children:(0,x.jsx)(r.rU,{to:null!==u&&void 0!==u?u:"#",style:{textDecoration:"none"},children:(0,x.jsx)(l.Z,{sx:{mt:{xs:2,md:0},width:{xs:"100%",sm:"inherit"}},variant:"contained",startIcon:(0,x.jsx)(a.Z,{fontSize:"small"}),children:t})})})]}),(0,x.jsx)(m,{})]})}},17317:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var r=t(74165),a=t(93433),s=t(1413),i=t(15861),c=t(38025),l=t(6907),o=t(16871),u=t(89164),d=t(57621),x=t(64554),h=t(94721),m=t(68418),Z=t(56499),f=t(29439),j=t(72791),v=t(13967),p=t(95193),b=t(20890),y=t(36151),k=t(19454),g=t(42460),w=t(63406),C=t(1373),I=t(80184),P=function(e){return e===k.y8?k.dS:k.ar},S=function(e){var n,t=e.clubId,l=(0,j.useState)(!1),o=(0,f.Z)(l,2),u=o[0],d=o[1],h=(0,v.Z)().breakpoints,m=(0,p.Z)(h.up("sm")),Z=(0,w.Q)(),S=(0,c.fC)(),R=(0,C.Z)(),A=null===(n=S())||void 0===n?void 0:n.clubs.filter((function(e){return e.id===t}))[0],D=new Date,U={year:A.semester===k.L9?A.year+1:A.year,semester:A.semester===k.L9?k.y8:k.L9},L=new Date("".concat(U.year,"-").concat(k.py)),z=new Date("".concat(U.year,"-").concat(k.YH)),O=A.semester===k.y8?D>z:D>L,T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U.semester||!U.year){e.next=13;break}return e.prev=1,e.next=4,Z.mutateAsync({clubId:t,data:{semesterInfo:U}});case 4:if(n=S()){e.next=7;break}throw Error;case 7:i=n.clubs.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{semester:e.id===t?U.semester:e.semester,year:e.id===t?U.year:e.year})})),R(n,i,(0,a.Z)(n.likes)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:d(!1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(b.Z,{variant:"h4",children:"\ud559\uae30 \uc774\uc6d4\ud558\uae30"}),A.semester&&A.year&&(0,I.jsxs)(x.Z,{mt:2,children:[(0,I.jsx)(x.Z,{children:(0,I.jsxs)(b.Z,{variant:"h5",display:"inline",children:["\ud604\uc7ac \ud559\uae30 : ",(0,I.jsx)(E,{text:"".concat(A.year)}),"\ub144\ub3c4\xa0",(0,I.jsx)(E,{text:P(A.semester)})]})}),O?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(b.Z,{variant:"h5",display:"inline",children:[(0,I.jsx)(E,{text:"".concat(U.year)}),"\ub144\ub3c4\xa0",(0,I.jsx)(E,{text:P(U.semester)}),"\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4."]}),(0,I.jsx)(x.Z,{my:2,children:(0,I.jsx)(y.Z,{color:"error",variant:"outlined",fullWidth:!m,onClick:function(){d(!0)},children:"\ud559\uae30 \uc774\uc6d4"})}),(0,I.jsx)(b.Z,{variant:"caption",children:"\ud559\uae30 \uc774\uc6d4\uc774\ub780, \uc55e\uc73c\ub85c\uc758 \ubaa8\ub4e0 \ud65c\ub3d9 \ubc0f \uc815\ubcf4 \uc785\ub825\uc740 \ub2e4\uc74c \ud559\uae30\ub85c \uc124\uc815\uc774 \ub41c\ub2e4\ub294 \ub73b\uc785\ub2c8\ub2e4. \ubc88\ubcf5\ud560 \uc218 \uc5c6\uc73c\ub2c8 \uc2e0\uc911\ud558\uac8c \uacb0\uc815\ud574 \uc8fc\uc138\uc694"})]}):(0,I.jsxs)(b.Z,{variant:"body2",display:"inline",children:["\ub2e4\uc74c \ud559\uae30 \uc774\uc6d4\uc740\xa0",U.semester===k.L9?k.YH:"".concat(U.year,"\ub144\ub3c4 ").concat(k.py),"\uc6d4 \uc774\ud6c4\ubd80\ud130 \uac00\ub2a5\ud569\ub2c8\ub2e4."]})]}),(0,I.jsx)(g.Z,{open:u,handleClose:function(){d(!1)},handleSubmit:T,confirmMessage:(0,I.jsx)(N,{year:U.year,semester:U.semester})})]})},E=function(e){var n=e.text;return(0,I.jsx)(b.Z,{color:"primary",variant:"inherit",display:"inline",children:n})},N=function(e){var n=e.year,t=e.semester;return(0,I.jsxs)(b.Z,{variant:"h4",color:"GrayText",children:["\uc9c0\uae08\ubd80\ud130 \uc0dd\uc131\ub418\ub294 \ud68c\uc758, \uc9c0\uc6d0, \uc815\ubcf4 \uc218\uc815 \ub4f1\uc758 \ubaa8\ub4e0 \uc791\uc5c5\uc740 ",(0,I.jsx)(E,{text:"".concat(n,"\ub144 ").concat(P(t))})," \ub97c \uae30\uc900\uc73c\ub85c \uc9c4\ud589\ub418\uba70, \ubc88\ubcf5\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4. \uc815\ub9d0\ub85c \uc124\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]})},R=t(89891),A={inputProps:{"aria-label":"\ub3d9\uc544\ub9ac \uacf5\uac1c\ud558\uae30"}},D=function(e){var n=e.handleSwitchChange,t=e.defaultChecked,r=e.clubName;return(0,I.jsxs)(x.Z,{display:"flex",justifyContent:"space-between",children:[(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(b.Z,{variant:"h4",children:"\ub3d9\uc544\ub9ac \uacf5\uac1c\ud558\uae30"}),(0,I.jsx)(x.Z,{mt:2,children:(0,I.jsxs)(b.Z,{children:["\uacf5\uac1c \uc2dc \ub3d9\uc544\ub9ac \uac80\uc0c9\uc5d0 ",r,"\uc774(\uac00) \ub178\ucd9c\ub429\ub2c8\ub2e4. \ub3d9\uc544\ub9ac\ub97c \ud64d\ubcf4\ud558\uace0 \ubc14\ub85c \ud68c\uc6d0\uc744 \ubaa8\uc9d1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})})]}),(0,I.jsx)(x.Z,{display:"flex",alignItems:"center",children:(0,I.jsx)(R.Z,(0,s.Z)((0,s.Z)({onChange:n},A),{},{defaultChecked:t,checked:t}))})]})},U=t(4942),L=t(61889),z=t(27391),O=t(31243),T=t(7477),W=t(98246),Q=t(91933),_=t(86856),M=function(e){var n=(0,W.Ds)().enqueueSnackbar,t=(0,c.cl)()();return(0,Q.useQuery)(["instagramId"],function(e){var n=e.clubId,t=e.token;return(0,i.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.Z.get("".concat("https://dev.api.klub.kr","/club/").concat(n,"/instagram"),{headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))}({clubId:e,token:t}),{onError:function(e){e instanceof T.d7?n(_.uz.SERVER_ERROR,{variant:"error"}):n(_.uz.UNKNOWN_ERROR,{variant:"error"})},retry:0})},q=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.clubId,s=n.clubLinks,e.next=3,O.Z.patch("".concat("https://dev.api.klub.kr","/club/").concat(a,"/instagram"),s,{headers:{Authorization:t}});case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),F=function(e){var n=e.clubId,t=(0,j.useState)({instagramId:""}),r=(0,f.Z)(t,2),a=r[0],i=r[1],l=M(n),o=l.data,u=l.isSuccess,d=function(){var e=(0,W.Ds)().enqueueSnackbar,n=(0,c.cl)()(),t=(0,Q.useQueryClient)();return(0,Q.useMutation)("putInstagram",(function(e){return q(e,n)}),{onSuccess:function(){e(_.uz.UPDATE_SUCCESS,{variant:"success"}),t.invalidateQueries("instagramId")},onError:function(n){n instanceof T.d7?e(_.uz.UPDATE_FAIL,{variant:"error"}):e(_.uz.UNKNOWN_ERROR,{variant:"error"})}})}();(0,j.useEffect)((function(){var e;u&&i({instagramId:null!==(e=o.instagramId)&&void 0!==e?e:""})}),[u]);return(0,I.jsx)(x.Z,{children:(0,I.jsxs)(x.Z,{width:"100%",children:[(0,I.jsx)(b.Z,{variant:"h4",children:"\ub3d9\uc544\ub9ac \ub9c1\ud06c \uc124\uc815"}),(0,I.jsxs)(L.ZP,{container:!0,alignItems:"center",mt:2,spacing:2,children:[(0,I.jsx)(L.ZP,{item:!0,xs:12,sm:6,sx:{display:{xs:"flex"},justifyContent:{xs:"center",sm:"flex-start"}},children:(0,I.jsx)(z.Z,{label:"\uc778\uc2a4\ud0c0\uadf8\ub7a8 \uc544\uc774\ub514",name:"instagramId",id:"limit",value:a.instagramId,onChange:function(e){return n=e.target.name,t=e.target.value,void i((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,U.Z)({},n,t))}));var n,t}})}),(0,I.jsx)(L.ZP,{item:!0,xs:12,sm:6,display:"flex",sx:{justifyContent:{xs:"center",sm:"flex-end"}},children:(0,I.jsx)(y.Z,{variant:"contained",color:"success",onClick:function(){u&&d.mutate({clubId:n,clubLinks:a})},children:"\ub4f1\ub85d / \uc218\uc815"})})]})]})})},H=function(){var e,n=(0,c.fC)(),t=(0,o.UO)(),f=Number(t.id),j=null===(e=n())||void 0===e?void 0:e.clubs.filter((function(e){return e.id===f}))[0],v=(0,C.Z)(),p=(0,w.Q)(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.mutateAsync({clubId:f,data:{searchable:t.target.checked}});case 3:if(i=n()){e.next=6;break}throw Error;case 6:c=i.clubs.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{searchable:e.id===f?!e.searchable:e.searchable})})),v(i,c,(0,a.Z)(i.likes)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.ql,{children:(0,I.jsx)("title",{children:"\ub3d9\uc544\ub9ac \uc124\uc815"})}),(0,I.jsx)(m.Z,{children:(0,I.jsx)(Z.Z,{clubName:j.name,buttonText:"\ud68c\uc6d0\ub4f1\uae09 \uad00\ub9ac",link:"/manage/".concat(f,"/settings/member-level")})}),(0,I.jsx)(u.Z,{maxWidth:"lg",children:(0,I.jsxs)(d.Z,{sx:{minHeight:"400px"},children:[(0,I.jsx)(x.Z,{mx:2,my:2,children:(0,I.jsx)(F,{clubId:f})}),(0,I.jsx)(h.Z,{}),(0,I.jsx)(x.Z,{mx:2,my:2,children:(0,I.jsx)(D,{handleSwitchChange:b,defaultChecked:j.searchable,clubName:j.name})}),(0,I.jsx)(h.Z,{}),(0,I.jsx)(x.Z,{mx:2,my:2,children:(0,I.jsx)(S,{clubId:f})}),(0,I.jsx)(h.Z,{})]})})]})}}}]);
//# sourceMappingURL=317.d2f46bba.chunk.js.map