"use strict";(self.webpackChunkklub=self.webpackChunkklub||[]).push([[7635],{86279:function(e,n,t){var r=t(16871),i=t(67414),a=t(36151),c=t(80184);n.Z=function(e){var n=e.handleSubmit,t=e.handleCancel,l=e.displayCancelBtn,o=void 0===l||l,d=e.submitBtnText,s=void 0===d?"\ub4f1\ub85d":d,u=e.cancelBtnText,h=void 0===u?"\ucde8\uc18c":u,x=(0,r.s0)();return(0,c.jsxs)(i.Z,{mt:2,pb:2,direction:"row",spacing:2,justifyContent:"center",children:[o&&(0,c.jsx)(a.Z,{color:"error",variant:"outlined",sx:{width:"50%",maxWidth:"120px"},onClick:function(e){void 0===t?x(-1):t(e)},children:h}),(0,c.jsx)(a.Z,{color:"success",variant:"contained",onClick:n,sx:{width:"50%",maxWidth:"120px"},children:s})]})}},47635:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var r=t(1413),i=t(29439),a=t(98246),c=t(72791),l=t(6907),o=t(16871),d=t(67394),s=t(27247),u=t(41286),h=t(64554),x=t(89164),f=t(57621),m=t(36151),Z=t(20890),p=t(61889),j=t(39281),v=t(79836),g=t(56890),b=t(35855),C=t(53994),y=t(20068),I=t(15473),S=t(20792),k=t(67414),D=t(27391),A=t(53382),w=t(94454),W=t(36571),T=t(47140),E=t(7792),N=[{label:"name",headerName:"\uc774\ub984"},{label:"level",headerName:"\ud68c\uc6d0 \ub4f1\uae09"},{label:"studentId",headerName:"\ud559\ubc88"},{label:"department",headerName:"\uc18c\uc18d \ud559\ubd80/\ud559\uacfc"},{label:"note",headerName:"\ube44\uace0"},{label:"attendance",headerName:"\ucd1d \ucd9c\uacb0"}],R=t(86856),M=t(90263),O=t(86279),P=t(80184),_=function(e){var n=e.label,t=e.open,a=e.onClose,l=e.currentRoundDate,o=e.handleMutateAttendance,d=(0,c.useState)(l),s=(0,i.Z)(d,2),u=s[0],h=s[1];return(0,P.jsx)(W._,{dateAdapter:E.y,children:(0,P.jsx)(T.O,{label:n,open:t,onClose:a,value:u,onChange:function(e){return h(null!==e&&void 0!==e?e:l)},onAccept:function(e){return o("patch",e)},renderInput:function(e){return(0,P.jsx)(D.Z,(0,r.Z)({sx:{display:"none"}},e))}})})},z=t(45552),B=t(86060),H=function(){var e,n=(0,c.useState)(new Date),t=(0,i.Z)(n,2),H=t[0],U=t[1],V=(0,c.useState)(!1),q=(0,i.Z)(V,2),L=q[0],F=q[1],G=(0,c.useState)(null),X=(0,i.Z)(G,2),J=X[0],K=X[1],Q=(0,c.useState)(null),Y=(0,i.Z)(Q,2),$=Y[0],ee=Y[1],ne=(0,c.useState)(null),te=(0,i.Z)(ne,2),re=te[0],ie=te[1],ae=(0,c.useState)(null),ce=(0,i.Z)(ae,2),le=ce[0],oe=ce[1],de=(0,c.useState)(-1),se=(0,i.Z)(de,2),ue=se[0],he=se[1],xe=(0,o.s0)(),fe=(0,o.UO)(),me=fe.id,Ze=fe.confId,pe=Number(me),je=Number(Ze),ve=(0,B.Z)().userInfo,ge=(0,a.Ds)().enqueueSnackbar,be=(0,c.useState)({id:je,title:"",participantTarget:"",conferenceParticipants:[],conferenceRounds:[]}),Ce=(0,i.Z)(be,2),ye=Ce[0],Ie=Ce[1],Se=(0,c.useState)([]),ke=(0,i.Z)(Se,2),De=ke[0],Ae=ke[1],we=null===ve||void 0===ve?void 0:ve.clubs.find((function(e){return e.id===pe})),We={year:(null===we||void 0===we?void 0:we.year)||M._8.year,semester:(null===we||void 0===we?void 0:we.semester)||M._8.semester},Te=(0,z.pp)(pe,We,je),Ee=Te.data,Ne=Te.isSuccess,Re=(0,z.c8)({clubId:pe,conferenceId:je,startAt:H,doesAllMemberAttended:!0}),Me=(0,z.xU)(),Oe=(0,z.lo)(),Pe=(0,z.am)({clubId:pe,conferenceId:je,statusOfAttendances:De}),_e=function(e,n){null===n||"patch"===e&&-1===ue?ge(R.sm.WRONG_DATE,{variant:"error"}):ye.conferenceRounds.some((function(e){return new Date(e.startAt).toDateString()===new Date(n).toDateString()}))?ge(R.sm.EXIST_ROUND_DATE,{variant:"error"}):("post"===e?Re.mutate():Me.mutate({clubId:pe,conferenceId:je,conferenceRoundId:ue,startAt:n,note:""}),Ue())},ze=function(){return K(null)},Be=function(){return F(!L)},He=function(e){he(parseInt(e.currentTarget.id)),ee(parseInt(e.currentTarget.id)),oe(e.currentTarget)},Ue=function(){oe(null),ee(null)},Ve=Boolean(le);return(0,c.useEffect)((function(){Ne&&(Ie(Ee),Ae(Ee.conferenceParticipants.map((function(e){return e.attendances})).flat()))}),[Ee]),(0,P.jsxs)(h.Z,{m:3,children:[(0,P.jsx)(l.ql,{children:(0,P.jsx)("title",{children:"\ucd9c\uc11d \uccb4\ud06c"})}),(0,P.jsx)(x.Z,{children:(0,P.jsxs)(f.Z,{children:[(0,P.jsxs)(h.Z,{display:"flex",alignItems:"center",p:1,children:[(0,P.jsx)(m.Z,{onClick:function(){xe(-1)},color:"primary",children:(0,P.jsx)(d.Z,{})}),(0,P.jsx)(Z.Z,{variant:"h4",component:"h4",children:"\ud68c\ucc28 \ubc0f \ucd9c\uc11d \uad00\ub9ac"}),(0,P.jsx)(Z.Z,{variant:"body1",ml:1,children:"\uc2e0\uaddc\ud68c\ucc28\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc804\uc6d0 \ucd9c\uc11d \uc0c1\ud0dc\ub85c \ucd94\uac00\ub429\ub2c8\ub2e4."})]}),(0,P.jsx)(p.ZP,{container:!0,sx:{dislplay:"flex",flexDirection:"row"},children:(0,P.jsx)(p.ZP,{item:!0,lg:12,md:12,sm:12,children:(0,P.jsx)(j.Z,{sx:{overflow:"auto"},children:(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(g.Z,{children:(0,P.jsxs)(b.Z,{hover:!0,children:[N.map((function(e){return(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.headerName},e.label)})),null===ye||void 0===ye?void 0:ye.conferenceRounds.map((function(e){return(0,P.jsxs)(C.Z,{align:"center",sx:{flex:1,justifyContent:"center",alignItems:"center",minWidth:100,"&:hover":{backgroundColor:"#E4E4E4",cursor:"pointer"}},children:[(0,P.jsx)(y.Z,{title:"\ud074\ub9ad\ud558\uba74 \uc0ad\uc81c \ud639\uc740 \uc218\uc815\uc744 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",placement:"top",id:e.id.toString(),children:(0,P.jsxs)(h.Z,{id:e.id.toString(),component:m.Z,onClick:He,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#636F86",padding:0,width:"100%","&:hover":{backgroundColor:"#E4E4E4",cursor:"pointer"}},children:[(0,P.jsxs)(Z.Z,{fontWeight:"700",children:[e.round," \ud68c\ucc28"]}),(0,P.jsxs)(Z.Z,{fontWeight:"700",children:[new Date(e.startAt).getMonth()+1,"\uc6d4 ",new Date(e.startAt).getDate(),"\uc77c"]})]})}),(0,P.jsx)(I.ZP,{id:e.id.toString(),open:Ve&&$===e.id,anchorEl:le,onClose:Ue,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,P.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"row",padding:1,alignItem:"center"},children:[(0,P.jsx)(m.Z,{onClick:function(){return n=e.id,void ie(n);var n},children:(0,P.jsx)(s.Z,{color:"error"})}),(0,P.jsx)(m.Z,{onClick:function(){return K(e.id)},children:(0,P.jsx)(u.Z,{color:"success"})})]})}),(0,P.jsx)(S.Z,{open:re===e.id,onClose:function(){return ie(null)},"aria-labelledby":"delete-modal-title","aira-describedby":"delete--modal-description",children:(0,P.jsxs)(h.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"#ffffff",minWidthidth:483,minHeight:132,borderRadius:1,p:2},children:[(0,P.jsxs)(k.Z,{direction:"column",alignItems:"center",children:[(0,P.jsx)(Z.Z,{variant:"h4",color:"primary",children:"\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \ud55c \ubc88 \uc0ad\uc81c\ud558\uc2e0 \ub0b4\uc5ed\uc740 \ub3cc\uc774\ud0ac \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,P.jsx)(Z.Z,{variant:"body1",color:"primary",children:"\ud574\ub2f9 \ud68c\ucc28\uc758 \ucd9c\uc11d \ub0b4\uc6a9\ub3c4 \uc0ad\uc81c\ub418\uba70, \ud68c\ucc28 \uc21c\uc11c\uac00 \uc7ac\uc815\ub82c\ub429\ub2c8\ub2e4."})]}),(0,P.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"row",gap:5,mt:2,justifyContent:"center",alignItem:"center"},children:[(0,P.jsx)(m.Z,{variant:"outlined",color:"primary",onClick:function(){return ie(null)},children:"\ucde8\uc18c"}),(0,P.jsx)(m.Z,{variant:"contained",color:"error",onClick:function(){return n=e.id,void Oe.mutate({clubId:pe,conferenceId:je,conferenceRoundId:n});var n},children:"\uc0ad\uc81c"})]})]})}),(0,P.jsx)(_,{label:"".concat(e.round,"\ud68c\ucc28 \uc77c\uc815"),open:e.id===J,onClose:ze,currentRoundDate:e.startAt,handleMutateAttendance:_e})]},e.id.toString())})),(0,P.jsxs)(C.Z,{align:"center",children:[(0,P.jsx)(m.Z,{onClick:Be,children:"\ud68c\ucc28 \ucd94\uac00"}),(0,P.jsx)(W._,{dateAdapter:E.y,children:(0,P.jsx)(T.O,{label:"\uc2e0\uaddc \ud68c\ucc28 \uc77c\uc815",open:L,onClose:Be,value:H,onChange:function(e){null!==e&&U(e)},onAccept:function(){return _e("post",H)},renderInput:function(e){return(0,P.jsx)(D.Z,(0,r.Z)({sx:{display:"none"}},e))}})})]})]})}),(0,P.jsx)(A.Z,{children:null===ye||void 0===ye||null===(e=ye.conferenceParticipants)||void 0===e?void 0:e.map((function(e){return(0,P.jsxs)(b.Z,{hover:!0,children:[(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.name}),(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.level}),(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.studentId}),(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.department}),(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:""===e.user.note?"-":e.user.note}),(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:0!==e.totalAttendanceCount?"".concat(e.attendanceCount,"/").concat(e.totalAttendanceCount):"-"}),e.attendances.map((function(n){return(0,P.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:(0,P.jsx)(w.Z,{checked:1===n.attendanceType,onChange:function(){return t=e.user.id,i=n.round,a=n.attendanceType,c=n.id,Ie((function(e){return(0,r.Z)((0,r.Z)({},e),{},{conferenceParticipants:null===e||void 0===e?void 0:e.conferenceParticipants.map((function(e){return e.user.id===t?(0,r.Z)((0,r.Z)({},e),{},{attendances:e.attendances.map((function(e){return e.round===i?(0,r.Z)((0,r.Z)({},e),{},{attendanceType:1===a?0:1}):e})),attendanceCount:1===a?e.attendanceCount-1:e.attendanceCount+1}):e}))})})),void Ae((function(e){return e.map((function(e){return e.id===c?(0,r.Z)((0,r.Z)({},e),{},{attendanceType:1===a?0:1}):e}))}));var t,i,a,c}})},n.id)}))]},e.user.id)}))})]})})})}),(0,P.jsx)(O.Z,{handleSubmit:function(){Pe.mutate()},submitBtnText:"\uc800\uc7a5"})]})})]})}},27247:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),a=t(80184),c=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=c},41286:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),a=t(80184),c=(0,i.default)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=c}}]);
//# sourceMappingURL=7635.8aa7f596.chunk.js.map