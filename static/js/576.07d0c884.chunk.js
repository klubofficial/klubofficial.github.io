"use strict";(self.webpackChunkklub=self.webpackChunkklub||[]).push([[576],{86279:function(e,n,t){var r=t(16871),i=t(67414),c=t(36151),a=t(80184);n.Z=function(e){var n=e.handleSubmit,t=e.handleCancel,l=e.displayCancelBtn,o=void 0===l||l,d=e.submitBtnText,s=void 0===d?"\ub4f1\ub85d":d,u=e.cancelBtnText,x=void 0===u?"\ucde8\uc18c":u,f=(0,r.s0)();return(0,a.jsxs)(i.Z,{mt:2,pb:2,direction:"row",spacing:2,justifyContent:"center",children:[o&&(0,a.jsx)(c.Z,{color:"error",variant:"outlined",sx:{width:"50%",maxWidth:"120px"},onClick:function(e){void 0===t?f(-1):t(e)},children:x}),(0,a.jsx)(c.Z,{color:"success",variant:"contained",onClick:n,sx:{width:"50%",maxWidth:"120px"},children:s})]})}},47635:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var r=t(1413),i=t(29439),c=t(98246),a=t(72791),l=t(6907),o=t(16871),d=t(67394),s=t(27247),u=t(41286),x=t(64554),f=t(89164),h=t(57621),m=t(36151),p=t(20890),Z=t(61889),j=t(39281),v=t(79836),g=t(56890),b=t(35855),C=t(53994),y=t(20068),I=t(15473),S=t(20792),k=t(67414),A=t(27391),D=t(53382),w=t(94454),W=t(36571),T=t(71352),E=t(7792),N=[{label:"name",headerName:"\uc774\ub984"},{label:"level",headerName:"\ud68c\uc6d0 \ub4f1\uae09"},{label:"studentId",headerName:"\ud559\ubc88"},{label:"department",headerName:"\uc18c\uc18d \ud559\ubd80/\ud559\uacfc"},{label:"note",headerName:"\ube44\uace0"},{label:"attendance",headerName:"\ucd1d \ucd9c\uacb0"}],R=t(86856),O=t(90263),P=t(86279),_=t(80184),B=function(e){var n=e.label,t=e.open,c=e.onClose,l=e.currentRoundDate,o=e.handleMutateAttendance,d=(0,a.useState)(l),s=(0,i.Z)(d,2),u=s[0],x=s[1];return(0,_.jsx)(W._,{dateAdapter:E.y,children:(0,_.jsx)(T.O,{label:n,open:t,onClose:c,value:u,onChange:function(e){return x(null!==e&&void 0!==e?e:l)},onAccept:function(e){return o("patch",e)},renderInput:function(e){return(0,_.jsx)(A.Z,(0,r.Z)({sx:{display:"none"}},e))}})})},M=t(45552),U=t(86060),q=function(){var e,n=(0,a.useState)(new Date),t=(0,i.Z)(n,2),q=t[0],z=t[1],F=(0,a.useState)(!1),G=(0,i.Z)(F,2),H=G[0],X=G[1],J=(0,a.useState)(null),K=(0,i.Z)(J,2),L=K[0],Q=K[1],V=(0,a.useState)(null),Y=(0,i.Z)(V,2),$=Y[0],ee=Y[1],ne=(0,a.useState)(null),te=(0,i.Z)(ne,2),re=te[0],ie=te[1],ce=(0,a.useState)(null),ae=(0,i.Z)(ce,2),le=ae[0],oe=ae[1],de=(0,a.useState)(-1),se=(0,i.Z)(de,2),ue=se[0],xe=se[1],fe=(0,o.s0)(),he=(0,o.UO)(),me=he.id,pe=he.confId,Ze=Number(me),je=Number(pe),ve=(0,U.Z)().userInfo,ge=(0,c.Ds)().enqueueSnackbar,be=(0,a.useState)({id:je,title:"",participantTarget:"",conferenceParticipants:[],conferenceRounds:[]}),Ce=(0,i.Z)(be,2),ye=Ce[0],Ie=Ce[1],Se=(0,a.useState)([]),ke=(0,i.Z)(Se,2),Ae=ke[0],De=ke[1],we=null===ve||void 0===ve?void 0:ve.clubs.find((function(e){return e.id===Ze})),We={year:(null===we||void 0===we?void 0:we.year)||O._8.year,semester:(null===we||void 0===we?void 0:we.semester)||O._8.semester},Te=(0,M.pp)(Ze,We,je),Ee=Te.data,Ne=Te.isSuccess,Re=(0,M.c8)({clubId:Ze,conferenceId:je,startAt:q,doesAllMemberAttended:!0}),Oe=(0,M.xU)(),Pe=(0,M.lo)(),_e=(0,M.am)({clubId:Ze,conferenceId:je,statusOfAttendances:Ae}),Be=function(e,n){null===n||"patch"===e&&-1===ue?ge(R.sm.WRONG_DATE,{variant:"error"}):ye.conferenceRounds.some((function(e){return new Date(e.startAt).toDateString()===new Date(n).toDateString()}))?ge(R.sm.EXIST_ROUND_DATE,{variant:"error"}):("post"===e?Re.mutate():Oe.mutate({clubId:Ze,conferenceId:je,conferenceRoundId:ue,startAt:n,note:""}),ze())},Me=function(){return Q(null)},Ue=function(){return X(!H)},qe=function(e){xe(parseInt(e.currentTarget.id)),ee(parseInt(e.currentTarget.id)),oe(e.currentTarget)},ze=function(){oe(null),ee(null)},Fe=Boolean(le);return(0,a.useEffect)((function(){Ne&&(Ie(Ee),De(Ee.conferenceParticipants.map((function(e){return e.attendances})).flat()))}),[Ee]),(0,_.jsxs)(x.Z,{m:3,children:[(0,_.jsx)(l.ql,{children:(0,_.jsx)("title",{children:"\ucd9c\uc11d \uccb4\ud06c"})}),(0,_.jsx)(f.Z,{children:(0,_.jsxs)(h.Z,{children:[(0,_.jsxs)(x.Z,{display:"flex",alignItems:"center",p:1,children:[(0,_.jsx)(m.Z,{onClick:function(){fe(-1)},color:"primary",children:(0,_.jsx)(d.Z,{})}),(0,_.jsx)(p.Z,{variant:"h4",component:"h4",children:"\ud68c\ucc28 \ubc0f \ucd9c\uc11d \uad00\ub9ac"}),(0,_.jsx)(p.Z,{variant:"body1",ml:1,children:"\uc2e0\uaddc\ud68c\ucc28\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc804\uc6d0 \ucd9c\uc11d \uc0c1\ud0dc\ub85c \ucd94\uac00\ub429\ub2c8\ub2e4."})]}),(0,_.jsx)(Z.ZP,{container:!0,sx:{dislplay:"flex",flexDirection:"row"},children:(0,_.jsx)(Z.ZP,{item:!0,lg:12,md:12,sm:12,children:(0,_.jsx)(j.Z,{sx:{overflow:"auto"},children:(0,_.jsxs)(v.Z,{children:[(0,_.jsx)(g.Z,{children:(0,_.jsxs)(b.Z,{hover:!0,children:[N.map((function(e){return(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.headerName},e.label)})),null===ye||void 0===ye?void 0:ye.conferenceRounds.map((function(e){return(0,_.jsxs)(C.Z,{align:"center",sx:{flex:1,justifyContent:"center",alignItems:"center",minWidth:100,"&:hover":{backgroundColor:"#E4E4E4",cursor:"pointer"}},children:[(0,_.jsx)(y.Z,{title:"\ud074\ub9ad\ud558\uba74 \uc0ad\uc81c \ud639\uc740 \uc218\uc815\uc744 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",placement:"top",id:e.id.toString(),children:(0,_.jsxs)(x.Z,{id:e.id.toString(),component:m.Z,onClick:qe,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#636F86",padding:0,width:"100%","&:hover":{backgroundColor:"#E4E4E4",cursor:"pointer"}},children:[(0,_.jsxs)(p.Z,{fontWeight:"700",children:[e.round," \ud68c\ucc28"]}),(0,_.jsxs)(p.Z,{fontWeight:"700",children:[new Date(e.startAt).getMonth()+1,"\uc6d4 ",new Date(e.startAt).getDate(),"\uc77c"]})]})}),(0,_.jsx)(I.ZP,{id:e.id.toString(),open:Fe&&$===e.id,anchorEl:le,onClose:ze,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,_.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"row",padding:1,alignItem:"center"},children:[(0,_.jsx)(m.Z,{onClick:function(){return n=e.id,void ie(n);var n},children:(0,_.jsx)(s.Z,{color:"error"})}),(0,_.jsx)(m.Z,{onClick:function(){return Q(e.id)},children:(0,_.jsx)(u.Z,{color:"success"})})]})}),(0,_.jsx)(S.Z,{open:re===e.id,onClose:function(){return ie(null)},"aria-labelledby":"delete-modal-title","aira-describedby":"delete--modal-description",children:(0,_.jsxs)(x.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"#ffffff",minWidthidth:483,minHeight:132,borderRadius:1,p:2},children:[(0,_.jsxs)(k.Z,{direction:"column",alignItems:"center",children:[(0,_.jsx)(p.Z,{variant:"h4",color:"primary",children:"\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \ud55c \ubc88 \uc0ad\uc81c\ud558\uc2e0 \ub0b4\uc5ed\uc740 \ub3cc\uc774\ud0ac \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,_.jsx)(p.Z,{variant:"body1",color:"primary",children:"\ud574\ub2f9 \ud68c\ucc28\uc758 \ucd9c\uc11d \ub0b4\uc6a9\ub3c4 \uc0ad\uc81c\ub418\uba70, \ud68c\ucc28 \uc21c\uc11c\uac00 \uc7ac\uc815\ub82c\ub429\ub2c8\ub2e4."})]}),(0,_.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"row",gap:5,mt:2,justifyContent:"center",alignItem:"center"},children:[(0,_.jsx)(m.Z,{variant:"outlined",color:"primary",onClick:function(){return ie(null)},children:"\ucde8\uc18c"}),(0,_.jsx)(m.Z,{variant:"contained",color:"error",onClick:function(){return n=e.id,void Pe.mutate({clubId:Ze,conferenceId:je,conferenceRoundId:n});var n},children:"\uc0ad\uc81c"})]})]})}),(0,_.jsx)(B,{label:"".concat(e.round,"\ud68c\ucc28 \uc77c\uc815"),open:e.id===L,onClose:Me,currentRoundDate:e.startAt,handleMutateAttendance:Be})]},e.id.toString())})),(0,_.jsxs)(C.Z,{align:"center",children:[(0,_.jsx)(m.Z,{onClick:Ue,children:"\ud68c\ucc28 \ucd94\uac00"}),(0,_.jsx)(W._,{dateAdapter:E.y,children:(0,_.jsx)(T.O,{label:"\uc2e0\uaddc \ud68c\ucc28 \uc77c\uc815",open:H,onClose:Ue,value:q,onChange:function(e){null!==e&&z(e)},onAccept:function(){return Be("post",q)},renderInput:function(e){return(0,_.jsx)(A.Z,(0,r.Z)({sx:{display:"none"}},e))}})})]})]})}),(0,_.jsx)(D.Z,{children:null===ye||void 0===ye||null===(e=ye.conferenceParticipants)||void 0===e?void 0:e.map((function(e){return(0,_.jsxs)(b.Z,{hover:!0,children:[(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.name}),(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.level}),(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.studentId}),(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:e.user.department}),(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:""===e.user.note?"-":e.user.note}),(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:0!==e.totalAttendanceCount?"".concat(e.attendanceCount,"/").concat(e.totalAttendanceCount):"-"}),e.attendances.map((function(n){return(0,_.jsx)(C.Z,{align:"center",sx:{flex:1,minWidth:100},children:(0,_.jsx)(w.Z,{checked:1===n.attendanceType,onChange:function(){return t=e.user.id,i=n.round,c=n.attendanceType,a=n.id,Ie((function(e){return(0,r.Z)((0,r.Z)({},e),{},{conferenceParticipants:null===e||void 0===e?void 0:e.conferenceParticipants.map((function(e){return e.user.id===t?(0,r.Z)((0,r.Z)({},e),{},{attendances:e.attendances.map((function(e){return e.round===i?(0,r.Z)((0,r.Z)({},e),{},{attendanceType:1===c?0:1}):e})),attendanceCount:1===c?e.attendanceCount-1:e.attendanceCount+1}):e}))})})),void De((function(e){return e.map((function(e){return e.id===a?(0,r.Z)((0,r.Z)({},e),{},{attendanceType:1===c?0:1}):e}))}));var t,i,c,a}})},n.id)}))]},e.user.id)}))})]})})})}),(0,_.jsx)(P.Z,{handleSubmit:function(){_e.mutate()},submitBtnText:"\uc800\uc7a5"})]})})]})}}}]);
//# sourceMappingURL=576.07d0c884.chunk.js.map