{"version":3,"file":"static/js/598.42203325.chunk.js","mappings":"sSAoBMA,GAAcC,EAAAA,EAAAA,IAAOC,EAAAA,EAAPD,EAClB,6GAOIE,EAAY,SAACC,GAAqB,OAAK,SAAC,KAAY,QAACC,KAAK,QAAQC,WAAS,GAAKF,GAAS,EAqH/F,UAnGA,WAAkB,IAAD,EACTG,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,KACRC,GAAUC,EAAAA,EAAAA,GAAcH,EAAMI,YAAYC,GAAG,OAC3CC,GAAoBC,EAAAA,EAAAA,MAApBD,gBAER,GAA4BE,EAAAA,EAAAA,UAAS,CACnCC,MAAO,KACPC,SAAU,OACV,eAHKC,EAAM,KAAEC,EAAS,KAKlBC,EAAe,SAAAC,GACnB,IAAMC,GAAS,kBACVJ,GAAM,cACRG,EAAME,OAAOC,KAAOH,EAAME,OAAOE,QAEpCN,EAAUG,EACZ,EAkCA,OACE,UAAC1B,EAAW,YACV,SAAC,KAAM,WACL,2BAAO,0BAET,UAAC,IAAK,CACJ8B,QAAQjB,EACRkB,IAAE,GACAC,GAAIrB,EAAMsB,QAAQ,IAClBC,QAAS,EACTC,KAAM,EACNC,SAAU,UAAO,SAChBzB,EAAMI,YAAYsB,KAAK,MAAQ,CAC9BL,GAAI,EACJM,GAAI,EACJF,SAAU,UACX,kBACO,CAAEG,GAAI,OAAQC,GAAI,YAAW,GACrC,WAEF,SAAC,IAAU,CAACC,UAAU,KAAKC,QAAQ,KAAKX,GAAI,CAAEY,GAAI,EAAGC,UAAW,UAAW,SAAC,mCAG5E,UAAC,IAAG,CACFH,UAAU,OACVV,GAAI,CACFc,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ,uBAAwB,CAAEC,OAAQ,IAEpCC,SAhEa,SAAAC,GACnBA,EAAEC,iBACFC,EAAAA,EAAAA,KACO,UAAsBC,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYC,kBAAiB,eAAehC,GACtEiC,MAAK,SAAAC,GAEJC,QAAQC,IAAIF,GACO,MAAfA,EAAIG,OAEJlD,EAAO,CACLmD,MAAOJ,EAAIK,KAAKC,YAChBC,UAAWC,SAASR,EAAIK,KAAKE,WAC7BE,UAAW,SACXC,UAAWV,EAAIK,KAAKM,SAKtBlD,EAAgB,mFAAmB,CAAEyB,QAAS,YAC9CnC,EAAS,MAENU,EAAgB,oHAAD,OAA2BuC,EAAIY,YAAc,CAAE1B,QAAS,SAChF,IACC2B,OAAM,SAAAC,GAAQ,IAAD,IACiB,OAAb,QAAZ,EAAAA,EAAIC,gBAAQ,aAAZ,EAAcZ,SAEG,QAAZ,EAAAW,EAAIC,gBAAQ,OAAZ,EAAcZ,OADrB1C,EAAgB,sHAAD,OAA6BqD,EAAIC,SAASH,YAAc,CAAE1B,QAAS,SAKtF,GACJ,EAiC+B,WAEvB,SAACvC,EAAS,CAACqE,GAAG,QAAQ5C,KAAK,QAAQ6C,KAAK,QAAQC,MAAM,qBAAMC,SAAUnD,KACtE,SAACrB,EAAS,CAACqE,GAAG,WAAW5C,KAAK,WAAW6C,KAAK,WAAWC,MAAM,2BAAOC,SAAUnD,KAChF,SAAC,IAAM,CAACiD,KAAK,SAAS/B,QAAQ,YAAYpC,WAAS,EAACyB,GAAI,CAAE6C,GAAI,GAAI,SAAC,wBAGnE,SAAC,IAAI,CAACC,KAAK,iBAAiB9C,GAAI,CAAE6C,GAAI,GAAI,SAAC,4EAOrD,C","sources":["content/authentication/Login/index.tsx"],"sourcesContent":["import {\n  Box,\n  Paper,\n  Typography,\n  TextField as MuiTextField,\n  Button,\n  Link,\n  TextFieldProps,\n  styled,\n  useTheme,\n  useMediaQuery\n} from '@mui/material'\nimport { Helmet } from 'react-helmet-async'\n\nimport axios, { AxiosResponse } from 'axios'\nimport { useNavigate } from 'react-router'\nimport { useState } from 'react'\nimport { useSignIn } from 'react-auth-kit'\nimport { useSnackbar } from 'notistack'\n\nconst PageWrapper = styled(Box)(\n  () => `\n      display: flex;\n      justify-content: center;\n      align-items: center;\n  `\n)\n\nconst TextField = (props: TextFieldProps) => <MuiTextField size=\"small\" fullWidth {...props} />\n\ninterface LoginAPIResponse extends AxiosResponse {\n  accessToken: string\n  expiresIn: string\n  refreshToken: string\n  refreshTokenExpiresIn: string\n  user: {\n    id: number\n    name: string\n    studentId: string\n    phoneNumber: string\n    email: string\n    department: string\n    nickname: string\n  }\n}\n\nfunction Login() {\n  const navigate = useNavigate()\n  const signIn = useSignIn()\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.up('sm'))\n  const { enqueueSnackbar } = useSnackbar()\n\n  const [values, setValues] = useState({\n    email: null,\n    password: null\n  })\n\n  const handleChange = event => {\n    const newValues = {\n      ...values,\n      [event.target.name]: event.target.value\n    }\n    setValues(newValues)\n  }\n  const handleSubmit = e => {\n    e.preventDefault()\n    axios\n      .post<LoginAPIResponse>(`${process.env.REACT_APP_APIHOST}/auth/login`, values)\n      .then(res => {\n        // eslint-disable-next-line no-console\n        console.log(res)\n        if (res.status === 200) {\n          if (\n            signIn({\n              token: res.data.accessToken,\n              expiresIn: parseInt(res.data.expiresIn),\n              tokenType: 'Bearer',\n              authState: res.data.user\n              // refreshToken: res.data.refreshToken,\n              // refreshTokenExpireIn: parseInt(res.data.refreshTokenExpiresIn)\n            })\n          ) {\n            enqueueSnackbar('성공적으로 로그인하였습니다.', { variant: 'success' })\n            navigate('/')\n          }\n        } else enqueueSnackbar(`브라우저 단에서 회원가입에 실패했습니다. ${res.statusText}`, { variant: 'error' })\n      })\n      .catch(err => {\n        if (err.response?.status === 400)\n          enqueueSnackbar(`서버 단에서 로그아웃에 실패했습니다. 이유: ${err.response.statusText}`, { variant: 'error' })\n        else if (err.response?.status === 400)\n          enqueueSnackbar(`서버 단에서 로그아웃에 실패했습니다. 이유: ${err.response.statusText}`, { variant: 'error' })\n        else\n          enqueueSnackbar(`서버 단에서 로그아웃에 실패했습니다. 이유: ${err.response.statusText}`, { variant: 'error' })\n      })\n  }\n\n  return (\n    <PageWrapper>\n      <Helmet>\n        <title>로그인</title>\n      </Helmet>\n      <Paper\n        square={matches ? false : true}\n        sx={{\n          my: theme.spacing(13),\n          padding: 3,\n          flex: 1,\n          maxWidth: '360px',\n          [theme.breakpoints.down('sm')]: {\n            my: 0,\n            py: 5,\n            maxWidth: '100%'\n          },\n          height: { xs: '90vh', sm: 'inherit' }\n        }}\n      >\n        <Typography component=\"h1\" variant=\"h3\" sx={{ mb: 2, textAlign: 'center' }}>\n          KLUB에 로그인\n        </Typography>\n        <Box\n          component=\"form\"\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            '& .MuiTextField-root': { margin: 1 }\n          }}\n          onSubmit={handleSubmit}\n        >\n          <TextField id=\"email\" name=\"email\" type=\"email\" label=\"이메일\" onChange={handleChange} />\n          <TextField id=\"password\" name=\"password\" type=\"password\" label=\"비밀번호\" onChange={handleChange} />\n          <Button type=\"submit\" variant=\"contained\" fullWidth sx={{ mt: 1 }}>\n            로그인\n          </Button>\n          <Link href=\"/auth/register\" sx={{ mt: 1 }}>\n            아직 계정이 없으신가요?\n          </Link>\n        </Box>\n      </Paper>\n    </PageWrapper>\n  )\n}\n\nexport default Login\n"],"names":["PageWrapper","styled","Box","TextField","props","size","fullWidth","navigate","useNavigate","signIn","useSignIn","theme","useTheme","matches","useMediaQuery","breakpoints","up","enqueueSnackbar","useSnackbar","useState","email","password","values","setValues","handleChange","event","newValues","target","name","value","square","sx","my","spacing","padding","flex","maxWidth","down","py","xs","sm","component","variant","mb","textAlign","display","flexDirection","alignItems","margin","onSubmit","e","preventDefault","axios","process","REACT_APP_APIHOST","then","res","console","log","status","token","data","accessToken","expiresIn","parseInt","tokenType","authState","user","statusText","catch","err","response","id","type","label","onChange","mt","href"],"sourceRoot":""}