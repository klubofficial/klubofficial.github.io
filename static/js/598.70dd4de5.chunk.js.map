{"version":3,"file":"static/js/598.70dd4de5.chunk.js","mappings":"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","sources":["content/authentication/Login/index.tsx"],"sourcesContent":["import axios, { AxiosResponse } from 'axios'\nimport { useSnackbar } from 'notistack'\nimport { useState } from 'react'\nimport { useSignIn } from 'react-auth-kit'\nimport { Helmet } from 'react-helmet-async'\nimport { useNavigate } from 'react-router'\n\nimport {\n  Box,\n  Button,\n  Link,\n  TextField as MuiTextField,\n  Paper,\n  TextFieldProps,\n  Typography,\n  styled,\n  useMediaQuery,\n  useTheme\n} from '@mui/material'\n\nconst PageWrapper = styled(Box)(\n  () => `\n      display: flex;\n      justify-content: center;\n      align-items: center;\n  `\n)\n\nconst TextField = (props: TextFieldProps) => <MuiTextField size=\"small\" required fullWidth {...props} />\n\ninterface LoginAPIResponse extends AxiosResponse {\n  accessToken: string\n  expiresIn: string\n  refreshToken: string\n  refreshTokenExpiresIn: string\n  user: {\n    id: number\n    name: string\n    studentId: string\n    phoneNumber: string\n    email: string\n    department: string\n    nickname: string\n  }\n  clubs: {\n    id: number\n    name: string\n    isAdmin: boolean\n  }\n}\n\nfunction Login() {\n  const navigate = useNavigate()\n  const signIn = useSignIn()\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.up('sm'))\n  const { enqueueSnackbar } = useSnackbar()\n\n  const [values, setValues] = useState({\n    email: null,\n    password: null\n  })\n\n  const handleChange: React.ChangeEventHandler<HTMLInputElement> = event => {\n    const newValues = {\n      ...values,\n      [event.target.name]: event.target.value\n    }\n    setValues(newValues)\n  }\n  const handleSubmit: React.FormEventHandler<HTMLFormElement> = e => {\n    e.preventDefault()\n    axios\n      .post<LoginAPIResponse>(`${process.env.REACT_APP_APIHOST}/auth/login`, values)\n      .then(res => {\n        if (\n          signIn({\n            token: res.data.accessToken,\n            expiresIn: Math.ceil(parseInt(res.data.expiresIn) / 60),\n            tokenType: 'Bearer',\n            authState: { clubs: res.data.clubs, ...res.data.user },\n            refreshToken: res.data.refreshToken,\n            refreshTokenExpireIn: Math.ceil(parseInt(res.data.refreshTokenExpiresIn) / 60)\n          })\n        ) {\n          enqueueSnackbar(`KLUB에 오신 걸 환영해요, ${res.data.user.nickname} 님!`, { variant: 'success' })\n          navigate('/')\n        } else enqueueSnackbar('로그인에 실패했어요. 다시 시도해주세요 T.T', { variant: 'error' })\n      })\n      .catch(err =>\n        enqueueSnackbar(err.response.data?.message ?? '서버에서 오류가 발생한 것 같아요. 다시 시도해주세요', {\n          variant: 'error'\n        })\n      )\n  }\n\n  return (\n    <PageWrapper>\n      <Helmet>\n        <title>로그인</title>\n      </Helmet>\n      <Paper\n        square={matches ? false : true}\n        sx={{\n          my: theme.spacing(13),\n          padding: 3,\n          flex: 1,\n          maxWidth: '360px',\n          [theme.breakpoints.down('sm')]: {\n            my: 0,\n            py: 5,\n            maxWidth: '100%'\n          },\n          height: { xs: '90vh', sm: 'inherit' }\n        }}\n      >\n        <Typography component=\"h1\" variant=\"h3\" sx={{ mb: 2, textAlign: 'center' }}>\n          KLUB에 로그인\n        </Typography>\n        <Box\n          component=\"form\"\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            '& .MuiTextField-root': { margin: 1 }\n          }}\n          onSubmit={handleSubmit}\n        >\n          <TextField id=\"email\" name=\"email\" type=\"email\" label=\"(학교) 이메일\" onChange={handleChange} />\n          <TextField id=\"password\" name=\"password\" type=\"password\" label=\"비밀번호\" onChange={handleChange} />\n          <Box sx={{ width: '100%', pr: 1 }}>\n            <Link href=\"/auth/find-password\" sx={{ mt: 1 }}>\n              <Typography variant=\"subtitle1\" sx={{ textAlign: 'right' }}>\n                비밀번호 찾기\n              </Typography>\n            </Link>\n          </Box>\n\n          <Button type=\"submit\" variant=\"contained\" fullWidth sx={{ mt: 1 }}>\n            로그인\n          </Button>\n          <Link href=\"/auth/register\" sx={{ mt: 1 }}>\n            아직 계정이 없으신가요?\n          </Link>\n        </Box>\n      </Paper>\n    </PageWrapper>\n  )\n}\n\nexport default Login\n"],"names":["PageWrapper","styled","Box","TextField","props","_jsx","MuiTextField","_objectSpread","size","required","fullWidth","_ref","navigate","useNavigate","signIn","useSignIn","theme","useTheme","matches","useMediaQuery","breakpoints","up","enqueueSnackbar","useSnackbar","_useState","useState","email","password","_useState2","_slicedToArray","values","setValues","handleChange","event","newValues","_defineProperty","target","name","value","_jsxs","children","Helmet","Paper","square","sx","my","spacing","padding","flex","maxWidth","down","py","xs","sm","Typography","component","variant","mb","textAlign","display","flexDirection","alignItems","margin","onSubmit","e","preventDefault","axios","concat","process","then","res","token","data","accessToken","expiresIn","Math","ceil","parseInt","tokenType","authState","clubs","user","refreshToken","refreshTokenExpireIn","refreshTokenExpiresIn","nickname","catch","err","_err$response$data$me","_err$response$data","response","message","id","type","label","onChange","width","pr","Link","href","mt","Button"],"sourceRoot":""}